<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grande Équipe - Plateforme de Communication</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-red: #ff4757;
            --primary-yellow: #ffd32a;
            --accent-red: #ff3838;
            --accent-yellow: #ffb142;
            --dark-bg: #2d3436;
            --light-bg: #f9f9f9;
            --card-bg: #ffffff;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header et cœur */
        .header-heart {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .heart-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin-bottom: 40px;
        }

        .heart {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-red) 30%, var(--primary-yellow) 70%);
            clip-path: polygon(50% 15%, 80% 0, 100% 25%, 50% 85%, 0 25%, 20% 0);
            animation: heartbeat 1.5s infinite alternate;
        }

        .heart-inner {
            position: absolute;
            width: 70%;
            height: 70%;
            background: white;
            top: 15%;
            left: 15%;
            clip-path: polygon(50% 15%, 80% 0, 100% 25%, 50% 85%, 0 25%, 20% 0);
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }

        .main-title {
            text-align: center;
            font-family: 'Quicksand', sans-serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 20px;
            max-width: 800px;
        }

        .main-title span {
            background: linear-gradient(to right, var(--primary-red), var(--accent-yellow));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 600px;
            margin-bottom: 40px;
        }

        /* Menu hamburger */
        .hamburger-menu {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000;
        }

        .hamburger-btn {
            background: var(--card-bg);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .hamburger-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .hamburger-btn span {
            display: block;
            width: 25px;
            height: 3px;
            background-color: var(--text-dark);
            margin: 3px 0;
            border-radius: 2px;
            transition: var(--transition);
        }

        .menu-overlay {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(45, 52, 54, 0.95);
            z-index: 999;
            display: flex;
            justify-content: flex-end;
            align-items: flex-start;
            transform: translateX(100%);
            transition: transform 0.4s ease;
        }

        .menu-overlay.active {
            transform: translateX(0);
        }

        .menu-content {
            width: 300px;
            height: 100%;
            background-color: var(--card-bg);
            padding: 100px 30px 30px;
            display: flex;
            flex-direction: column;
        }

        .menu-item {
            padding: 18px 0;
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--text-dark);
            text-decoration: none;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            cursor: pointer;
        }

        .menu-item:hover {
            color: var(--primary-red);
            padding-left: 10px;
        }

        .menu-item i {
            margin-right: 15px;
            width: 25px;
            text-align: center;
        }

        /* Contenu principal */
        .content-section {
            display: none;
            padding: 80px 0;
            min-height: 100vh;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 50px;
            color: var(--text-dark);
        }

        .section-title span {
            color: var(--primary-red);
        }

        /* Page d'accueil */
        .stats-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-bottom: 60px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            width: 220px;
            text-align: center;
            margin: 15px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-10px);
        }

        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .stat-card:nth-child(1) i { color: var(--primary-red); }
        .stat-card:nth-child(2) i { color: var(--primary-yellow); }
        .stat-card:nth-child(3) i { color: var(--accent-red); }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .stat-label {
            color: var(--text-light);
            font-size: 1rem;
        }

        .participation-gauge {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto 60px;
            box-shadow: var(--shadow);
        }

        .gauge-title {
            font-size: 1.4rem;
            margin-bottom: 25px;
            text-align: center;
        }

        .gauge-container {
            height: 30px;
            background-color: #eee;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .gauge-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-red), var(--accent-yellow));
            border-radius: 15px;
            width: 65%;
            transition: width 1s ease;
        }

        .gauge-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .motivation-text {
            text-align: center;
            font-style: italic;
            font-size: 1.2rem;
            color: var(--text-light);
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Page d'enregistrement */
        .registration-container {
            display: flex;
            flex-direction: column;
            gap: 60px;
        }

        .clan-section, .players-section, .coach-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 40px;
            box-shadow: var(--shadow);
        }

        .clan-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .clan-item {
            background: linear-gradient(135deg, #f5f5f5, #e9ecef);
            border-radius: 10px;
            padding: 20px 10px;
            text-align: center;
            font-weight: 500;
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }

        .clan-item:hover {
            transform: translateY(-5px);
            border-color: var(--primary-red);
        }

        .clan-item.active {
            background: linear-gradient(135deg, var(--primary-red), var(--accent-red));
            color: white;
        }

        .form-container {
            margin-top: 30px;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary-red);
            box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.1);
        }

        .submit-btn {
            background: linear-gradient(to right, var(--primary-red), var(--accent-yellow));
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: block;
            margin: 30px auto 0;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 71, 87, 0.2);
        }

        /* Page de remarques */
        .remarks-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .remarks-form {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 40px;
            box-shadow: var(--shadow);
        }

        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            min-height: 150px;
            resize: vertical;
            transition: var(--transition);
        }

        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-red);
            box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.1);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
        }

        .radio-option input {
            margin-right: 8px;
        }

        /* Admin login */
        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(45, 52, 54, 0.95);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            display: none;
        }

        .admin-overlay.active {
            display: flex;
        }

        .admin-login {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 50px;
            width: 400px;
            max-width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .admin-login h2 {
            margin-bottom: 30px;
            color: var(--text-dark);
        }

        .password-input {
            position: relative;
            margin-bottom: 30px;
        }

        .password-input input {
            width: 100%;
            padding: 15px 45px 15px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            letter-spacing: 8px;
            text-align: center;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--text-light);
        }

        /* Messages */
        .message {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .message.success {
            background-color: rgba(46, 204, 113, 0.1);
            color: #27ae60;
            border: 1px solid #27ae60;
        }

        .message.error {
            background-color: rgba(231, 76, 60, 0.1);
            color: #c0392b;
            border: 1px solid #c0392b;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .clan-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .stat-card {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Header avec cœur -->
    <div class="header-heart">
        <div class="heart-container">
            <div class="heart"></div>
            <div class="heart-inner"></div>
        </div>
        
        <h1 class="main-title">Plateforme de <span>Communication</span> pour la Grande Équipe</h1>
        <p class="subtitle">Faciliter les échanges entre le Doyen M, le Doyen P et toute l'équipe pour une collaboration optimale et un bonheur partagé</p>
    </div>

    <!-- Menu hamburger -->
    <div class="hamburger-menu">
        <button class="hamburger-btn" id="hamburgerBtn">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>

    <div class="menu-overlay" id="menuOverlay">
        <div class="menu-content">
            <a class="menu-item" data-section="home">
                <i class="fas fa-home"></i> Accueil
            </a>
            <a class="menu-item" data-section="registration">
                <i class="fas fa-user-plus"></i> Enregistrement
            </a>
            <a class="menu-item" data-section="remarks">
                <i class="fas fa-comment-dots"></i> Donner vos remarques
            </a>
            <a class="menu-item" id="adminAccess">
                <i class="fas fa-lock"></i> Accès Admin
            </a>
        </div>
    </div>

    <!-- Contenu principal -->
    <div class="container">
        <!-- Section Accueil -->
        <section id="home" class="content-section active">
            <h2 class="section-title">Bienvenue dans la <span>Grande Équipe</span></h2>
            
            <div class="stats-container">
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <div class="stat-value" id="playersCount">0</div>
                    <div class="stat-label">Joueurs enregistrés</div>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-trophy"></i>
                    <div class="stat-value" id="challengesCount">0</div>
                    <div class="stat-label">Challenges réalisés</div>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-comments"></i>
                    <div class="stat-value" id="remarksCount">0</div>
                    <div class="stat-label">Remarques partagées</div>
                </div>
            </div>
            
            <div class="participation-gauge">
                <h3 class="gauge-title">Taux de participation de l'équipe</h3>
                <div class="gauge-container">
                    <div class="gauge-fill" id="participationGauge"></div>
                </div>
                <div class="gauge-labels">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
            </div>
            
            <p class="motivation-text">
                "Le succès n'est pas la clé du bonheur. Le bonheur est la clé du succès. 
                Si vous aimez ce que vous faites, vous réussirez." - Albert Schweitzer
            </p>
        </section>

        <!-- Section Enregistrement -->
        <section id="registration" class="content-section">
            <h2 class="section-title">Enregistrement des <span>Participants</span></h2>
            
            <div class="registration-container">
                <div class="clan-section">
                    <h3>Sélectionnez un Clan</h3>
                    <div class="clan-grid" id="clanGrid">
                        <!-- Les clans seront générés par JavaScript -->
                    </div>
                </div>
                
                <div class="players-section">
                    <h3>Enregistrement des Joueurs</h3>
                    <div class="form-container">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="playerLastName">Nom</label>
                                <input type="text" id="playerLastName" placeholder="Entrez le nom">
                            </div>
                            <div class="form-group">
                                <label for="playerFirstName">Prénom</label>
                                <input type="text" id="playerFirstName" placeholder="Entrez le prénom">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="playerTravel">Voyage</label>
                                <select id="playerTravel">
                                    <option value="">Sélectionnez</option>
                                    <option value="Oui">Oui</option>
                                    <option value="Non">Non</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="playerAge">Âge</label>
                                <input type="number" id="playerAge" placeholder="Entrez l'âge" min="10" max="99">
                            </div>
                        </div>
                        
                        <button class="submit-btn" id="registerPlayerBtn">Enregistrer le Joueur</button>
                    </div>
                </div>
                
                <div class="coach-section">
                    <h3>Enregistrement des Coachs</h3>
                    <div class="form-container">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="coachRole">Rôle</label>
                                <input type="text" id="coachRole" placeholder="Rôle du coach">
                            </div>
                            <div class="form-group">
                                <label for="coachName">Nom</label>
                                <input type="text" id="coachName" placeholder="Nom du coach">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="coachPhone">Téléphone</label>
                                <input type="tel" id="coachPhone" placeholder="Numéro de téléphone">
                            </div>
                        </div>
                        
                        <button class="submit-btn" id="registerCoachBtn">Enregistrer le Coach</button>
                    </div>
                </div>
            </div>
            
            <div id="registrationMessage" class="message"></div>
        </section>

        <!-- Section Remarques -->
        <section id="remarks" class="content-section">
            <h2 class="section-title">Partagez vos <span>Remarques</span></h2>
            
            <div class="remarks-container">
                <div class="remarks-form">
                    <div class="form-group">
                        <label for="remarkType">Type de remarque</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="type1" name="remarkType" value="challenge" checked>
                                <label for="type1">Avis sur le challenge</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="type2" name="remarkType" value="problem">
                                <label for="type2">Problème rencontré</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="type3" name="remarkType" value="improvement">
                                <label for="type3">Amélioration possible</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="type4" name="remarkType" value="change">
                                <label for="type4">Changement à apporter</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="remarkText">Votre remarque</label>
                        <textarea id="remarkText" placeholder="Partagez vos pensées, vos idées d'amélioration, ou tout autre commentaire utile pour l'équipe..."></textarea>
                    </div>
                    
                    <button class="submit-btn" id="submitRemarkBtn">Envoyer la Remarque</button>
                </div>
                
                <div id="remarkMessage" class="message"></div>
            </div>
        </section>
    </div>

    <!-- Panneau admin -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-login">
            <h2>Accès Administrateur</h2>
            <div class="password-input">
                <input type="password" id="adminPassword" placeholder="Code d'accès">
                <span class="password-toggle" id="passwordToggle">
                    <i class="fas fa-eye"></i>
                </span>
            </div>
            <button class="submit-btn" id="loginAdminBtn">Accéder</button>
            <div id="adminMessage" class="message"></div>
        </div>
    </div>

    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDzqpBeTgALSf4a-uVAqFdowjB0AnT7dis",
            authDomain: "genieka-2026.firebaseapp.com",
            projectId: "genieka-2026",
            storageBucket: "genieka-2026.firebasestorage.app",
            messagingSenderId: "303752964623",
            appId: "1:303752964623:web:b4d0cf171ea948fc94517a",
            measurementId: "G-1DMZRJSF05"
        };

        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Variables globales
        let selectedClan = 1;
        let adminAuthenticated = false;

        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser les composants UI
            initUI();
            // Initialiser les données Firebase
            initFirebaseData();
            // Générer les clans
            generateClans();
        });

        // Initialisation de l'interface utilisateur
        function initUI() {
            // Menu hamburger
            const hamburgerBtn = document.getElementById('hamburgerBtn');
            const menuOverlay = document.getElementById('menuOverlay');
            const menuItems = document.querySelectorAll('.menu-item');
            
            hamburgerBtn.addEventListener('click', function() {
                menuOverlay.classList.toggle('active');
                // Animation des barres du menu hamburger
                const spans = hamburgerBtn.querySelectorAll('span');
                if (menuOverlay.classList.contains('active')) {
                    spans[0].style.transform = 'rotate(45deg) translate(6px, 6px)';
                    spans[1].style.opacity = '0';
                    spans[2].style.transform = 'rotate(-45deg) translate(6px, -6px)';
                } else {
                    spans[0].style.transform = 'none';
                    spans[1].style.opacity = '1';
                    spans[2].style.transform = 'none';
                }
            });
            
            // Navigation entre sections
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    if (sectionId) {
                        showSection(sectionId);
                        menuOverlay.classList.remove('active');
                        // Réinitialiser l'animation du menu hamburger
                        const spans = hamburgerBtn.querySelectorAll('span');
                        spans[0].style.transform = 'none';
                        spans[1].style.opacity = '1';
                        spans[2].style.transform = 'none';
                    }
                });
            });
            
            // Accès admin
            document.getElementById('adminAccess').addEventListener('click', function() {
                document.getElementById('adminOverlay').classList.add('active');
            });
            
            // Toggle mot de passe admin
            document.getElementById('passwordToggle').addEventListener('click', function() {
                const passwordInput = document.getElementById('adminPassword');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
            
            // Connexion admin
            document.getElementById('loginAdminBtn').addEventListener('click', function() {
                const password = document.getElementById('adminPassword').value;
                const adminMessage = document.getElementById('adminMessage');
                
                if (password === 'Lwanga/kahenga2k26@') {
                    adminAuthenticated = true;
                    adminMessage.textContent = 'Accès autorisé! Redirection vers le panneau admin...';
                    adminMessage.className = 'message success';
                    adminMessage.style.display = 'block';
                    
                    // Simuler l'accès au panneau admin
                    setTimeout(() => {
                        document.getElementById('adminOverlay').classList.remove('active');
                        adminMessage.style.display = 'none';
                        alert('Bienvenue dans le panneau admin! Ici, vous pourriez voir toutes les données enregistrées.');
                    }, 1500);
                } else {
                    adminMessage.textContent = 'Code d\'accès incorrect. Veuillez réessayer.';
                    adminMessage.className = 'message error';
                    adminMessage.style.display = 'block';
                }
            });
            
            // Fermer l'overlay admin en cliquant à l'extérieur
            document.getElementById('adminOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                    document.getElementById('adminMessage').style.display = 'none';
                    document.getElementById('adminPassword').value = '';
                }
            });
            
            // Enregistrement des joueurs
            document.getElementById('registerPlayerBtn').addEventListener('click', function() {
                registerPlayer();
            });
            
            // Enregistrement des coachs
            document.getElementById('registerCoachBtn').addEventListener('click', function() {
                registerCoach();
            });
            
            // Envoi des remarques
            document.getElementById('submitRemarkBtn').addEventListener('click', function() {
                submitRemark();
            });
        }

        // Initialiser les données Firebase
        function initFirebaseData() {
            // Écouter les changements pour les statistiques
            database.ref('players').on('value', function(snapshot) {
                const count = snapshot.numChildren();
                document.getElementById('playersCount').textContent = count;
                updateParticipationGauge();
            });
            
            database.ref('remarks').on('value', function(snapshot) {
                const count = snapshot.numChildren();
                document.getElementById('remarksCount').textContent = count;
                updateParticipationGauge();
            });
            
            // Mettre à jour le nombre de challenges (exemple statique)
            document.getElementById('challengesCount').textContent = '3';
        }

        // Générer les 15 clans
        function generateClans() {
            const clanGrid = document.getElementById('clanGrid');
            clanGrid.innerHTML = '';
            
            for (let i = 1; i <= 15; i++) {
                const clanItem = document.createElement('div');
                clanItem.className = 'clan-item';
                clanItem.textContent = `Clan ${i}`;
                clanItem.dataset.clan = i;
                
                if (i === 1) {
                    clanItem.classList.add('active');
                }
                
                clanItem.addEventListener('click', function() {
                    // Retirer la classe active de tous les clans
                    document.querySelectorAll('.clan-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Ajouter la classe active au clan sélectionné
                    this.classList.add('active');
                    selectedClan = parseInt(this.dataset.clan);
                    
                    // Animation
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
                
                clanGrid.appendChild(clanItem);
            }
        }

        // Afficher une section spécifique
        function showSection(sectionId) {
            // Cacher toutes les sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section demandée
            document.getElementById(sectionId).classList.add('active');
            
            // Animation de transition
            document.getElementById(sectionId).style.opacity = '0';
            document.getElementById(sectionId).style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                document.getElementById(sectionId).style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                document.getElementById(sectionId).style.opacity = '1';
                document.getElementById(sectionId).style.transform = 'translateY(0)';
            }, 50);
        }

        // Mettre à jour la jauge de participation
        function updateParticipationGauge() {
            // Simuler une valeur de participation (dans un vrai projet, cela viendrait de Firebase)
            const participation = Math.min(65 + Math.random() * 20, 95); // Valeur entre 65% et 95%
            const gauge = document.getElementById('participationGauge');
            gauge.style.width = `${participation}%`;
        }

        // Enregistrer un joueur
        function registerPlayer() {
            const lastName = document.getElementById('playerLastName').value.trim();
            const firstName = document.getElementById('playerFirstName').value.trim();
            const travel = document.getElementById('playerTravel').value;
            const age = document.getElementById('playerAge').value;
            
            // Validation
            if (!lastName || !firstName || !travel || !age) {
                showMessage('registrationMessage', 'Veuillez remplir tous les champs obligatoires.', 'error');
                return;
            }
            
            // Créer l'objet joueur
            const player = {
                clan: selectedClan,
                lastName: lastName,
                firstName: firstName,
                travel: travel,
                age: parseInt(age),
                timestamp: new Date().toISOString()
            };
            
            // Envoyer à Firebase
            const newPlayerRef = database.ref('players').push();
            newPlayerRef.set(player)
                .then(() => {
                    showMessage('registrationMessage', 'Joueur enregistré avec succès!', 'success');
                    // Réinitialiser le formulaire
                    document.getElementById('playerLastName').value = '';
                    document.getElementById('playerFirstName').value = '';
                    document.getElementById('playerTravel').value = '';
                    document.getElementById('playerAge').value = '';
                })
                .catch(error => {
                    console.error('Erreur:', error);
                    showMessage('registrationMessage', 'Erreur lors de l\'enregistrement. Veuillez réessayer.', 'error');
                });
        }

        // Enregistrer un coach
        function registerCoach() {
            const role = document.getElementById('coachRole').value.trim();
            const name = document.getElementById('coachName').value.trim();
            const phone = document.getElementById('coachPhone').value.trim();
            
            // Validation
            if (!role || !name || !phone) {
                showMessage('registrationMessage', 'Veuillez remplir tous les champs obligatoires.', 'error');
                return;
            }
            
            // Créer l'objet coach
            const coach = {
                role: role,
                name: name,
                phone: phone,
                timestamp: new Date().toISOString()
            };
            
            // Envoyer à Firebase
            const newCoachRef = database.ref('coaches').push();
            newCoachRef.set(coach)
                .then(() => {
                    showMessage('registrationMessage', 'Coach enregistré avec succès!', 'success');
                    // Réinitialiser le formulaire
                    document.getElementById('coachRole').value = '';
                    document.getElementById('coachName').value = '';
                    document.getElementById('coachPhone').value = '';
                })
                .catch(error => {
                    console.error('Erreur:', error);
                    showMessage('registrationMessage', 'Erreur lors de l\'enregistrement. Veuillez réessayer.', 'error');
                });
        }

        // Soumettre une remarque
        function submitRemark() {
            const remarkType = document.querySelector('input[name="remarkType"]:checked').value;
            const remarkText = document.getElementById('remarkText').value.trim();
            
            // Validation
            if (!remarkText) {
                showMessage('remarkMessage', 'Veuillez écrire votre remarque.', 'error');
                return;
            }
            
            // Déterminer le type de remarque
            let typeText = '';
            switch (remarkType) {
                case 'challenge': typeText = 'Avis sur le challenge'; break;
                case 'problem': typeText = 'Problème rencontré'; break;
                case 'improvement': typeText = 'Amélioration possible'; break;
                case 'change': typeText = 'Changement à apporter'; break;
            }
            
            // Créer l'objet remarque
            const remark = {
                type: typeText,
                text: remarkText,
                timestamp: new Date().toISOString()
            };
            
            // Envoyer à Firebase
            const newRemarkRef = database.ref('remarks').push();
            newRemarkRef.set(remark)
                .then(() => {
                    showMessage('remarkMessage', 'Remarque envoyée avec succès! Merci pour votre contribution.', 'success');
                    // Réinitialiser le formulaire
                    document.getElementById('remarkText').value = '';
                })
                .catch(error => {
                    console.error('Erreur:', error);
                    showMessage('remarkMessage', 'Erreur lors de l\'envoi. Veuillez réessayer.', 'error');
                });
        }

        // Afficher un message
        function showMessage(elementId, text, type) {
            const messageElement = document.getElementById(elementId);
            messageElement.textContent = text;
            messageElement.className = `message ${type}`;
            messageElement.style.display = 'block';
            
            // Masquer le message après 5 secondes
            setTimeout(() => {
                messageElement.style.display = 'none';
            }, 5000);
        }

        // Animation du cœur au chargement
        window.addEventListener('load', function() {
            const heart = document.querySelector('.heart');
            heart.style.animation = 'heartbeat 1.5s infinite alternate';
            
            // Animation de défilement vers le bas pour voir le contenu
            setTimeout(() => {
                window.scrollTo({
                    top: window.innerHeight * 0.8,
                    behavior: 'smooth'
                });
            }, 2000);
        });
    </script>
</body>
</html>